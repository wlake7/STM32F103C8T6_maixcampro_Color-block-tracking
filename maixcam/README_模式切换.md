# MaixCam激光追踪系统 - 模式切换指南

## 🎯 快速模式切换

### 方法：修改 `run_config.py` 文件

```python
# 在 run_config.py 中修改这一行：
RUN_MODE = 2  # 改为你想要的模式号
```

## 📋 可用模式

### 模式1：激光追踪模式 (完整功能)
```python
RUN_MODE = 1
```
- **功能**: 完整的激光追踪系统
- **用途**: 正常使用激光追踪功能
- **需要**: STM32运行MODE_LASER_TRACK模式

### 模式2：通信诊断模式 (推荐用于调试)
```python
RUN_MODE = 2
```
- **功能**: 测试与STM32的串口通信
- **用途**: 诊断通信问题，验证数据传输
- **需要**: STM32运行MODE_COMM_DEBUG模式
- **输出**: 发送测试数据包，显示发送状态

### 模式3：摄像头测试模式
```python
RUN_MODE = 3
```
- **功能**: 测试摄像头和图像检测
- **用途**: 验证红色目标和绿色激光检测
- **需要**: 仅MaixCam，不需要STM32连接

## 🔧 使用步骤

1. **编辑配置文件**
   ```bash
   # 使用文本编辑器打开
   nano run_config.py
   # 或者
   vim run_config.py
   ```

2. **修改模式**
   ```python
   # 找到这一行并修改数字
   RUN_MODE = 2  # 改为你想要的模式
   ```

3. **保存并运行**
   ```bash
   python main.py
   ```

## 📊 模式对应关系

| MaixCam模式 | STM32模式 | 用途 |
|------------|-----------|------|
| RUN_MODE = 1 | MODE_LASER_TRACK | 完整激光追踪 |
| RUN_MODE = 2 | MODE_COMM_DEBUG | 通信诊断 |
| RUN_MODE = 3 | 任意 | 摄像头测试 |

## 🚨 注意事项

1. **每次修改后需要重新运行** `python main.py`
2. **通信模式需要STM32配合**：确保STM32运行对应的调试模式
3. **串口连接**：确保MaixCam A28(TX)→STM32 PA10(RX)，A29(RX)→STM32 PA9(TX)
4. **波特率**：确保双方都使用115200bps

## 🔍 故障排除

### 问题：程序报错 "EOF when reading a line"
- **原因**: 旧版本使用input()函数
- **解决**: 使用新版本，通过修改run_config.py切换模式

### 问题：串口初始化失败
- **检查**: 硬件连接和引脚映射
- **确认**: 使用/dev/ttyS2和正确的引脚配置

### 问题：STM32无响应
- **检查**: STM32是否运行对应的调试模式
- **确认**: LED指示是否正常闪烁
